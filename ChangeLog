================================================================================
This file describes what main-trunk tags were created and why
================================================================================

================================================================================
Originator: mvertens, tcraig
Date: Sept 21, 2012
Model: cism
Version: cism1_120921
One-line summary: add esmf interface

Purpose of changes: Add esmf interface

Changes answers relative to previous tag: No

Bugs fixed (include bugzilla ID) (http://bugs.cgd.ucar.edu/):

List all modified files, and describe the changes:

M       bld/cism.buildexe.csh
A       drivers/cpl_esmf/glc_comp_mct.F90
A       drivers/cpl_esmf/glc_comp_esmf.F90

Summary of testing:

(testing performed by Bill Sacks)

*** Full test suite NOT run: Since the changes were isolated to the
*** esmf interface, the full test suite seemed unnecessary

- bluefire.glc.auxtest: main test results: NOT DONE
  
- bluefire.glc.auxtest: results of component_gen_comp -model cism: NOT DONE

- Other tests:

PASS  CME10y.f09_g16.TG1850.bluefire_ibm 
PASS  CME10y_N2_P2_D.f09_g16.TG1850.bluefire_ibm 
PASS  CME10y_N2_P2.f09_g16.TG1850.bluefire_ibm 
PASS  ERS20y_E.f09_g16.TG20TR.bluefire_ibm 
PASS  ERS20y_E.f09_g16.TG20TR.bluefire_ibm.memleak
PASS  CME5y_PL.T31_g37.IG.bluefire_ibm 
PASS  SMS_D.f09_g16.BGRCP45CN.bluefire_ibm 
PASS  SMS_D.f09_g16.BGRCP45CN.bluefire_ibm.memleak
PASS  SMS_DE.f09_g16.BGRCP45CN.bluefire_ibm 
PASS  SMS_DE.f09_g16.BGRCP45CN.bluefire_ibm.memleak
PASS  NCK_E.T31_g37.BG1850CN.bluefire_ibm 

Ran shortlist.glc.auxtest, with comparison to cesm1_1_alpha18a:

PASS  SMS_D.f09_g16.TG.bluefire_ibm 
PASS  SMS_D.f09_g16.TG.bluefire_ibm.memleak
PASS  SMS_D.f09_g16.TG.bluefire_ibm.compare_hist.cesm1_1_alpha18a 
PASS  SMS_D.f09_g16.TG.bluefire_ibm.memcomp.cesm1_1_alpha18a 
FAIL  SMS_D.f09_g16.TG.bluefire_ibm.tputcomp.cesm1_1_alpha18a 
COMMENT   tput_decr = 79.75 tput_percent_decr = 13.8
PASS  ERS20y.f09_g16.TG1850.bluefire_ibm 
PASS  ERS20y.f09_g16.TG1850.bluefire_ibm.memleak
PASS  ERS20y.f09_g16.TG1850.bluefire_ibm.compare_hist.cesm1_1_alpha18a 
PASS  ERS20y.f09_g16.TG1850.bluefire_ibm.memcomp.cesm1_1_alpha18a 
PASS  ERS20y.f09_g16.TG1850.bluefire_ibm.tputcomp.cesm1_1_alpha18a PASS  SMS_D.T31_g37.IG.bluefire_ibm 
PASS  SMS_D.T31_g37.IG.bluefire_ibm.memleak
FAIL  SMS_D.T31_g37.IG.bluefire_ibm.compare_hist.cesm1_1_alpha18a 
PASS  SMS_D.T31_g37.IG.bluefire_ibm.memcomp.cesm1_1_alpha18a 
FAIL  SMS_D.T31_g37.IG.bluefire_ibm.tputcomp.cesm1_1_alpha18a 
COMMENT   tput_decr = 2.949 tput_percent_decr = 12.1

The failure in compare_hist with the IG case seems just due to runoff
changes:

[be1105en:/ptmp/sacks/tests/SMS_D.T31_g37.IG.bluefire_ibm.C.111836]$ grep RMS cprnc.out 
 RMS r2x_Forr 1.3464E-06
[be1105en:/ptmp/sacks/tests/SMS_D.T31_g37.IG.bluefire_ibm.C.111836]$ grep FILLDIFF cprnc.out 
 FILLDIFF domr_lat
 FILLDIFF domr_lon
 FILLDIFF domr_are
 FILLDIFF domr_are
 FILLDIFF domr_mas
 FILLDIFF domr_fra
 FILLDIFF r2x_Forr
 FILLDIFF r2x_Forr

So I'm not worried about this

Related component_gen_comp:

PASS  ERS20y.f09_g16.TG1850.bluefire_ibm.compare_hist.cesm1_1_alpha18a.cism 
PASS  SMS_D.T31_g37.IG.bluefire_ibm.compare_hist.cesm1_1_alpha18a.cism 
PASS  SMS_D.f09_g16.TG.bluefire_ibm.compare_hist.cesm1_1_alpha18a.cism 


Externals used for testing:

    scripts                         https://svn-ccsm-models.cgd.ucar.edu/scripts/branch_tags/rtmcomp_tags/rtmcomp07_scripts4_120828

    scripts/ccsm_utils/Machines     https://svn-ccsm-models.cgd.ucar.edu/Machines/branch_tags/rtmcomp_tags/rtmcomp03_Machines_120829

    mapping                                 https://svn-ccsm-models.cgd.ucar.edu/tools/mapping/trunk_tags/mapping_120816

    models/drv                      https://svn-ccsm-models.cgd.ucar.edu/drv/seq_mct/branch_tags/rtmcomp_tags/rtmcomp15_drvseq4_1_26

    models/csm_share                https://svn-ccsm-models.cgd.ucar.edu/csm_share/branch_tags/rtmcomp_tags/rtmcomp02_share3_120803

    models/atm/cam                  https://svn-ccsm-models.cgd.ucar.edu/cam1/branch_tags/exe_cam5_1_33_tags/exe01_cam5_1_33/models/atm/cam
    models/atm/wrf                  https://svn-ccsm-models.cgd.ucar.edu/wrf/trunk_tags/wrf32_ccsm120726

    models/lnd/clm                  https://svn-ccsm-models.cgd.ucar.edu/clm2/branch_tags/rtmcomp_tags/rtmcomp14_clm4_0_46/models/lnd/clm

    models/rof/rtm                  https://svn-ccsm-models.cgd.ucar.edu/rivrtm/trunk_tags/rtm1_0_04

    models/ice/cice                 https://svn-ccsm-models.cgd.ucar.edu/cice/trunk_tags/cice4_0_20120825

    models/glc/cism                 https://svn-ccsm-models.cgd.ucar.edu/glc/branches/rtmcomp

    models/ocn/pop2/                https://svn-ccsm-models.cgd.ucar.edu/pop2/trunk_tags/cesm_pop_2_1_20120824

    models/atm/datm                 https://svn-ccsm-models.cgd.ucar.edu/datm7/trunk_tags/datm8_120626
    models/lnd/dlnd                 https://svn-ccsm-models.cgd.ucar.edu/dlnd7/branch_tags/rtmcomp_tags/rtmcomp02_dlnd8_120626
    models/ice/dice                 https://svn-ccsm-models.cgd.ucar.edu/dice7/trunk_tags/dice8_120626
    models/ocn/docn                 https://svn-ccsm-models.cgd.ucar.edu/docn7/trunk_tags/docn8_120626
    models/rof/drof                 https://svn-ccsm-models.cgd.ucar.edu/drof/trunk_tags/drof8_120827

    models/atm/xatm                 https://svn-ccsm-models.cgd.ucar.edu/dead7/trunk_tags/dead7_7_04/xatm
    models/lnd/xlnd                 https://svn-ccsm-models.cgd.ucar.edu/dead7/trunk_tags/dead7_7_04/xlnd
    models/ice/xice                 https://svn-ccsm-models.cgd.ucar.edu/dead7/trunk_tags/dead7_7_04/xice
    models/ocn/xocn                 https://svn-ccsm-models.cgd.ucar.edu/dead7/trunk_tags/dead7_7_04/xocn
    models/glc/xglc                 https://svn-ccsm-models.cgd.ucar.edu/dead7/trunk_tags/dead7_7_04/xglc
    models/rof/xrof                 https://svn-ccsm-models.cgd.ucar.edu/dead7/trunk_tags/dead7_7_04/xrof
    models/dead_share               https://svn-ccsm-models.cgd.ucar.edu/dead7/trunk_tags/dead7_7_04/dead_share

    models/atm/satm                 https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_4_01/satm
    models/lnd/slnd                 https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_4_01/slnd
    models/ice/sice                 https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_4_01/sice
    models/ocn/socn                 https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_4_01/socn
    models/glc/sglc                 https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_4_01/sglc
    models/rof/srof                 https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_4_01/srof

    models/utils/timing             https://svn-ccsm-models.cgd.ucar.edu/timing/trunk_tags/timing_120731
    models/utils/esmf_wrf_timemgr   https://svn-ccsm-models.cgd.ucar.edu/esmf_wrf_timemgr/trunk_tags/esmf_wrf_timemgr_120427

    models/utils/mct                https://github.com/MCSclimate/MCT/tags/MCT_2.8.0

    models/utils/pio                http://parallelio.googlecode.com/svn/trunk_tags/pio1_5_3/pio

cism tag used for baseline comparisons: cism1_120905

Any other externals that differed in baseline: Used cesm1_1_alpha18a
for baselines; this involves many differences in externals

================================================================================
Originator: sacks
Date: Sept 5, 2012
Model: cism
Version: cism1_120905
One-line summary: change basal_tract to real rather than integer

Purpose of changes:

basal_tract was mistakenly listed as an integer; I am fixing this.

Changes answers relative to previous tag: No

Bugs fixed (include bugzilla ID) (http://bugs.cgd.ucar.edu/):

List all modified files, and describe the changes:

M       bld/namelist_files/namelist_definition_cism.xml

Summary of testing: No system tests; just tested namelist generation

- bluefire.glc.auxtest: main test results: NOT DONE
  
- bluefire.glc.auxtest: results of component_gen_comp -model cism: NOT DONE

- Other tests:

(1) Ran 'create_newcase -compset TG -res f09_g16 -mach bluefire', then
'setup'. Compared default cism.config with baseline version: identical

(2) In that case, did the following:
echo 'basal_tract = 2.5 10 10 0 1' >> user_nl_cism
preview_namelists

Confirmed that it worked to use a real value.


Externals used for testing:

    scripts                         https://svn-ccsm-models.cgd.ucar.edu/scripts/trunk_tags/scripts4_120828

    scripts/ccsm_utils/Machines     https://svn-ccsm-models.cgd.ucar.edu/Machines/trunk_tags/Machines_120829

    mapping             			https://svn-ccsm-models.cgd.ucar.edu/tools/mapping/trunk_tags/mapping_120816

    models/drv                      https://svn-ccsm-models.cgd.ucar.edu/drv/seq_mct/trunk_tags/drvseq4_1_26

    models/csm_share                https://svn-ccsm-models.cgd.ucar.edu/csm_share/trunk_tags/share3_120803

    models/atm/cam                  https://svn-ccsm-models.cgd.ucar.edu/cam1/branch_tags/exe_cam5_1_33_tags/exe01_cam5_1_33/models/atm/cam
    models/atm/wrf                  https://svn-ccsm-models.cgd.ucar.edu/wrf/trunk_tags/wrf32_ccsm120726

    models/lnd/clm                  https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_46/models/lnd/clm 

    models/ice/cice                 https://svn-ccsm-models.cgd.ucar.edu/cice/trunk_tags/cice4_0_20120825

    models/glc/cism                 https://svn-ccsm-models.cgd.ucar.edu/glc/branches/ensemble

    models/ocn/pop2/                https://svn-ccsm-models.cgd.ucar.edu/pop2/trunk_tags/cesm_pop_2_1_20120824

    models/atm/datm                 https://svn-ccsm-models.cgd.ucar.edu/datm7/trunk_tags/datm8_120626
    models/lnd/dlnd                 https://svn-ccsm-models.cgd.ucar.edu/dlnd7/trunk_tags/dlnd8_120626
    models/ice/dice                 https://svn-ccsm-models.cgd.ucar.edu/dice7/trunk_tags/dice8_120626
    models/ocn/docn                 https://svn-ccsm-models.cgd.ucar.edu/docn7/trunk_tags/docn8_120626

    models/atm/xatm                 https://svn-ccsm-models.cgd.ucar.edu/dead7/trunk_tags/dead7_6_05/xatm
    models/lnd/xlnd                 https://svn-ccsm-models.cgd.ucar.edu/dead7/trunk_tags/dead7_6_05/xlnd
    models/ice/xice                 https://svn-ccsm-models.cgd.ucar.edu/dead7/trunk_tags/dead7_6_05/xice
    models/ocn/xocn                 https://svn-ccsm-models.cgd.ucar.edu/dead7/trunk_tags/dead7_6_05/xocn
    models/glc/xglc                 https://svn-ccsm-models.cgd.ucar.edu/dead7/trunk_tags/dead7_6_05/xglc
    models/dead_share               https://svn-ccsm-models.cgd.ucar.edu/dead7/trunk_tags/dead7_6_05/dead_share

    models/atm/satm                 https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_3_05/satm
    models/lnd/slnd                 https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_3_05/slnd
    models/ice/sice                 https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_3_05/sice
    models/ocn/socn                 https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_3_05/socn
    models/glc/sglc                 https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_3_05/sglc

    models/utils/timing             https://svn-ccsm-models.cgd.ucar.edu/timing/trunk_tags/timing_120731
    models/utils/esmf_wrf_timemgr   https://svn-ccsm-models.cgd.ucar.edu/esmf_wrf_timemgr/trunk_tags/esmf_wrf_timemgr_120427

    models/utils/mct                https://github.com/MCSclimate/MCT/tags/MCT_2.8.0

    models/utils/pio                http://parallelio.googlecode.com/svn/trunk_tags/pio1_5_3/pio


cism tag used for baseline comparisons: cism1_120829

Any other externals that differed in baseline: None

================================================================================
Originator: sacks
Date: Aug 29, 2012
Model: cism
Version: cism1_120829
One-line summary: enable ensemble capabilities

Purpose of changes:

Enable ensemble capabilities for cism. These were already implemented
in drv & scripts, but required some changes in the cism code.

Also, change flow_factor to real rather than integer.

Changes answers relative to previous tag: No

Bugs fixed (include bugzilla ID) (http://bugs.cgd.ucar.edu/):

List all modified files, and describe the changes:

*** New modules to handle variables that differ between ensemble members
A       source_glc/glc_ensemble.F90
A       source_glc/glc_files.F90
A       test/unit/unit_test_replacements/glc_files.F90
        - simplified version needed because the time management unit test
          doesn't know anything about ensemble number

*** Add ensemble capability
M       drivers/cpl_mct/glc_comp_mct.F90
M       source_glc/glc_io.F90
        - Also deleted unused glc_io_create_suffix_cesm, because I think it
          would have been broken with ensemble capabilities
M       source_glc/glc_constants.F90
        - Move file names that are no longer constant

*** Change use statements to reflect movement of some file name variables
M       source_glc/glc_InitMod.F90
M       source_glc/glc_global_grid.F90
M       source_glc/glc_time_management.F90

*** Add use of glc_files.F90
M       test/unit/time_management/Srcfiles

*** Change flow_factor to real rather than integer
M       bld/namelist_files/namelist_definition_cism.xml

*** Updated changeLog template to give more testing details
M       ChangeLog_template

Summary of testing:

- bluefire.glc.auxtest: main test results: 

All PASS except the following (other than throughput tests, these are all expected failures):

FAIL  ERS20y.f09_g16.TG1850.bluefire_ibm.tputcomp.cesm1_1_alpha17c 
COMMENT   tput_decr = 1694.229 tput_percent_decr = 44.5
BFAIL ERS20y_N2_P2.f09_g16.TGG10.bluefire_ibm.compare_hist.cesm1_1_alpha17c 
BFAIL NCK_P2.f09_g16.TG.bluefire_ibm.compare_hist.cesm1_1_alpha17c 
FAIL  SMS_PL.T31_g37.IGLONG.bluefire_ibm.tputcomp.cesm1_1_alpha17c 
COMMENT   tput_decr = 3.6440000 tput_percent_decr = 2.08
FAIL  SMS.f19_f19.FG20TRCN.bluefire_ibm.tputcomp.cesm1_1_alpha17c 
COMMENT   tput_decr = 1.627 tput_percent_decr = 13.5

(Note: test list was that in scripts4_120828, plus
ERS20y.f09_g16.TGG10.bluefire_ibm [which was included in the baseline test
suite, but has now been replaced by a _N2 version of this test])

- bluefire.glc.auxtest: results of component_gen_comp -model cism:

All PASS except the following (these are expected failures):

BFAIL ERS20y_N2_P2.f09_g16.TGG10.bluefire_ibm.compare_hist.cesm1_1_alpha17c.cism (baseline directory does not exist)
BFAIL NCK_P2.f09_g16.TG.bluefire_ibm.compare_hist.cesm1_1_alpha17c.cism (baseline directory does not exist)

- Other tests:

  - 4-instance TG run with differences in flow_factor: startup with one
    continue run; compared instances #1 and #3 with analogous
    single-instance runs (comparisons included cism hist, cism rest & cpl
    hist files)

  - as above, but 16 PE run with glc on PEs 4-7: compared with above run to
    make sure results don't depend on PE location

  - 4-instance IGLONG test with differences in the albice CLM parameter;
    compared instance #3 with analogous single-instance run (comparisons
    included clm hist, cism hist & cpl hist files)

Externals used for testing:

    scripts                         https://svn-ccsm-models.cgd.ucar.edu/scripts/trunk_tags/scripts4_120828

    scripts/ccsm_utils/Machines     https://svn-ccsm-models.cgd.ucar.edu/Machines/trunk_tags/Machines_120826

    mapping                                 https://svn-ccsm-models.cgd.ucar.edu/tools/mapping/trunk_tags/mapping_120816

    models/drv                      https://svn-ccsm-models.cgd.ucar.edu/drv/seq_mct/trunk_tags/drvseq4_1_26

    models/csm_share                https://svn-ccsm-models.cgd.ucar.edu/csm_share/trunk_tags/share3_120803

    models/atm/cam                  https://svn-ccsm-models.cgd.ucar.edu/cam1/branch_tags/exe_cam5_1_33_tags/exe01_cam5_1_33/models/atm/cam
    models/atm/wrf                  https://svn-ccsm-models.cgd.ucar.edu/wrf/trunk_tags/wrf32_ccsm120726

    models/lnd/clm                  https://svn-ccsm-models.cgd.ucar.edu/clm2/trunk_tags/clm4_0_46/models/lnd/clm 

    models/ice/cice                 https://svn-ccsm-models.cgd.ucar.edu/cice/trunk_tags/cice4_0_20120825

    models/glc/cism                 https://svn-ccsm-models.cgd.ucar.edu/glc/branches/ensemble

    models/ocn/pop2/                https://svn-ccsm-models.cgd.ucar.edu/pop2/trunk_tags/cesm_pop_2_1_20120824

    models/atm/datm                 https://svn-ccsm-models.cgd.ucar.edu/datm7/trunk_tags/datm8_120626
    models/lnd/dlnd                 https://svn-ccsm-models.cgd.ucar.edu/dlnd7/trunk_tags/dlnd8_120626
    models/ice/dice                 https://svn-ccsm-models.cgd.ucar.edu/dice7/trunk_tags/dice8_120626
    models/ocn/docn                 https://svn-ccsm-models.cgd.ucar.edu/docn7/trunk_tags/docn8_120626

    models/atm/xatm                 https://svn-ccsm-models.cgd.ucar.edu/dead7/trunk_tags/dead7_6_05/xatm
    models/lnd/xlnd                 https://svn-ccsm-models.cgd.ucar.edu/dead7/trunk_tags/dead7_6_05/xlnd
    models/ice/xice                 https://svn-ccsm-models.cgd.ucar.edu/dead7/trunk_tags/dead7_6_05/xice
    models/ocn/xocn                 https://svn-ccsm-models.cgd.ucar.edu/dead7/trunk_tags/dead7_6_05/xocn
    models/glc/xglc                 https://svn-ccsm-models.cgd.ucar.edu/dead7/trunk_tags/dead7_6_05/xglc
    models/dead_share               https://svn-ccsm-models.cgd.ucar.edu/dead7/trunk_tags/dead7_6_05/dead_share

    models/atm/satm                 https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_3_05/satm
    models/lnd/slnd                 https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_3_05/slnd
    models/ice/sice                 https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_3_05/sice
    models/ocn/socn                 https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_3_05/socn
    models/glc/sglc                 https://svn-ccsm-models.cgd.ucar.edu/stubs/trunk_tags/stubs1_3_05/sglc

    models/utils/timing             https://svn-ccsm-models.cgd.ucar.edu/timing/trunk_tags/timing_120731
    models/utils/esmf_wrf_timemgr   https://svn-ccsm-models.cgd.ucar.edu/esmf_wrf_timemgr/trunk_tags/esmf_wrf_timemgr_120427

    models/utils/mct                https://github.com/MCSclimate/MCT/tags/MCT_2.8.0

    models/utils/pio                http://parallelio.googlecode.com/svn/trunk_tags/pio1_5_3/pio


cism tag used for baseline comparisons: cism1_120823

Any other externals that differed in baseline: 

- scripts4_120727d: only diff is in bluefire.glc.auxtest list

================================================================================
Originator: sacks
Date: Aug 23, 2012
Model: cism
Version: cism1_120823
One-line summary: Turn evolution on for gland5UM

Purpose of changes:

Turn evolution on for gland5UM (evolution=0 rather than -1). Also shorten
time steps so ice sheet evolution is stable for gland5UM: dt=0.05,
ntem=nvel=niso=0.1. These parameters came from Jeremy Fyke's most recent
runs.

The values of these (and other) parameters may still change, but I wanted
to use something for now that gives ice sheet evolution with gland5UM to
facilitate testing. 

Changes answers relative to previous tag: Yes, for gland5UM

Bugs fixed (include bugzilla ID) (http://bugs.cgd.ucar.edu/):

List all modified files, and describe the changes:

M       bld/namelist_files/namelist_defaults_cism.xml

Summary of testing:

No system tests!

Just created three cases and compared cism.config with previously-generated
cases:

- gland5UM: diffs as expected

- gland5: no diffs

- gland10: no diffs

================================================================================
Originator: mvertens
Date: June 29, 2012
Model: cism
Version: cism1_120629
One-line summary: Change DIN_LOC_ROOT_CSMDATA to DIN_LOC_ROOT

Purpose of changes: Change DIN_LOC_ROOT_CSMDATA to DIN_LOC_ROOT

Changes answers relative to previous tag: No

Bugs fixed (include bugzilla ID) (http://bugs.cgd.ucar.edu/):

List all modified files, and describe the changes:

*** simple, one-line change
M       bld/build-namelist

Summary of testing: NONE!

================================================================================
Originator: mvertens
Date: May 29, 2012
Model: cism
Version: cism1_120529
One-line summary: Modifications to build to fit with latest scripts

Purpose of changes:

Minor changes to fit in with other system changes Mariana is bringing in


Changes answers relative to previous tag: No

Bugs fixed (include bugzilla ID) (http://bugs.cgd.ucar.edu/):

List all modified files, and describe the changes:

M      bld/cism.cpl7.template


Summary of testing: NONE!

================================================================================
Originator: mvertens
Date: May 21, 2012
Model: cism
Version: cism1_120521
One-line summary: Support removal of env_conf.xml

Purpose of changes:

Changes to build-namelist to support removal of env_conf.xml, and related
cleanup


Changes answers relative to previous tag: No

Bugs fixed (include bugzilla ID) (http://bugs.cgd.ucar.edu/):

List all modified files, and describe the changes:

M       bld/build-namelist


Summary of testing:

(All tests except the ERI IGCN test were conducted by Bill S)

Main testing: Unless otherwise noted, the following tests were done with a
10-year TG compset, f09_g16, GLC_GRID=gland20. I compared (1) cism_in input
file, (2) cism.config input file, (3) year 10 cism history output (using
cprnc). The comparison cases were generated from cesm1_1_beta14.

- startup run

- startup run at f19_g16

- startup run with gland5UM

- branch run; 1 year (continuing the above startup run)


Other tests:

- ERI.T31_g37.IGCN.bluefire_ibm
  - comparison with cesm1_1_alpha14a

- Checked dt_option & dt_count in cism in for the following:
  - NCPL_BASE_PERIOD=decade, GLC_NCPL=5 (dt_option=steps_per_year, dt_count=0.5)

================================================================================
Originator: mvertens, sacks
Date: May 15, 2012
Model: cism
Version: cism1_120512
One-line summary: New build-namelist functionality

Purpose of changes:

- New build-namelist functionality to make cism consistent with other CESM
  components. Makes cism.buildnml.csh just a thin wrapper to
  build-namelist. Namelist defaults now set in an xml file. 

- Set dt_option and dt_count automatically to match the coupling interval.

- Multi-instance capability in the build scripts (create multiple cism_in &
  cism.config files).


Changes answers relative to previous tag: No

Bugs fixed (include bugzilla ID) (http://bugs.cgd.ucar.edu/):

List all modified files, and describe the changes:

*** Major rework of build
D       bld/configure
D       bld/config_definition.xsl
D       bld/namelist_defaults_overall.xml
D       bld/namelist_definition_overall.xml
D       bld/namelist_defaults.xsl
D       bld/namelist_definition.xsl
D       bld/config_definition.xml
D       bld/namelist_defaults_cism.xml
D       bld/namelist_definition_cism.xml
A       bld/user_nl_cism
A       bld/cismIO/cism.buildIO.template.csh
A       bld/README.build-namelist
A       bld/cism.buildexe.csh
M       bld/build-namelist
M       bld/cism.cpl7.template
A       bld/cism.buildnml.csh
M       bld/README
A       bld/namelist_files/namelist_defaults_cism.xml
A       bld/namelist_files/namelist_definition_cism.xml
A       bld/namelist_files

*** Remove now-unnecessary input templates (replaced by
*** namelist_files/namelist_defaults_cism.xml)
D       input_templates

*** Add unit test for 2-year time step
M       test/unit/time_management/restart_testlist
A       test/unit/time_management/inputs/twoyear/time_management_test_in
A       test/unit/time_management/inputs/twoyear/cism_in
A       test/unit/time_management/inputs/twoyear
M       test/unit/time_management/inputs/README
A       test/unit/time_management/inputs/twoyear.restart1/time_management_test_in
A       test/unit/time_management/inputs/twoyear.restart1/cism_in
A       test/unit/time_management/inputs/twoyear.restart1
A       test/unit/time_management/inputs/twoyear.restart2/time_management_test_in
A       test/unit/time_management/inputs/twoyear.restart2/cism_in
A       test/unit/time_management/inputs/twoyear.restart2
M       test/unit/time_management/testlist

*** Fix path
M       test/unit/unit_test_shr/Makefile.common

*** Remove redundant README file
D       README

*** Remove "Known bugs" section
M       ChangeLog_template


Summary of testing:

CESM Tests (implemented change off of cesm1_1_beta13, compared with baseline
cesm1_1_beta13):

- bluefire.glc.auxtest: All tests passed except:

CFAIL ERS.T31_g37.IGRCP85CN.bluefire_ibm.C.215553 
FAIL  SMS.T31_T31.FG20TRCN.bluefire_ibm 
BFAIL SMS.T31_T31.FG20TRCN.bluefire_ibm.compare_hist.cesm1_1_beta13 
FAIL  SMS.T31_g37.TG.bluefire_ibm 
BFAIL SMS.T31_g37.TG.bluefire_ibm.compare_hist.cesm1_1_beta13 

These were all expected failures (also failed in cesm1_1_beta13)

- ERS.f19_g16.IGCN.bluefire_ibm: PASS
  - ran this because of failure in ERS.T31_g37.IGRCP85CN.bluefire_ibm


Main testing of new build: Unless otherwise noted, the following tests were done
with a 10-year TG compset, f09_g16, GLC_GRID=gland20. I compared (1) cism_in
input file, (2) cism.config input file, (3) year 10 cism history output (using
cprnc). The comparison cases were generated from cesm1_1_beta13.

- startup run
  - Also made sure that list of files in run directory is the same as before

- startup run at f19_g16

- startup run with gland5UM

- startup run with gland5
  - just checked cism_in and cism.config -- didn't actually do the run

- startup run with gland10
  - just checked cism_in and cism.config -- didn't actually do the run

- hybrid run; 1 year (continuing the above startup run)

- branch run; 1 year (continuing the above startup run)

- continue run; 1 year -- continuing the above startup run

- continue run; 1 year -- continuing the above branch run

- IG: 1-year test at f19_g16, continuing an older run that had run for
  10 years (hybrid)
  - main point of this was to make sure 1-day coupling still works right



Testing automatic setting of dt_option and dt_count, and making sure that it
works to use values more general than what we have been using before:

- New time manager unit tests, to make sure it works to have fractional dt_count
  with steps_per_year (as we could get with NCPL_BASE_PERIOD='decade'):
  - twoyear
    - looked through output manually (briefly)
    - compared with output from using dt_option='seconds', dt_count=63072000
  - restart_test twoyear

- Checked dt_option & dt_count in cism_in for the following:
  - out-of-the-box TG
  - out-of-the-box IG
  - various values of NCPL_BASE_PERIOD & GLC_NCPL
  - values overridden by user_nl_cism

- TG run with NCPL_BASE_PERIOD='year', GLC_NCPL=2 (i.e., two time steps per
  year): confirmed that there is one cism time step per coupling interval

- TG run with NCPL_BASE_PERIOD='decade', GLC_NCPL=5 (i.e., 2-year time step),
  with mass balance time step = 2 years (requires source mod in glint_mbal.F90),
  ice dynamics time step = 2 years (dt=2.): confirmed that there is one cism
  time step per coupling interval

- Compared log files in two 1-year TG runs, which have the same time step but
  specified in different ways: one with NCPL_BASE_PERIOD=day, GLC_NCPL=48
  (results in dt_option=steps_per_day, dt_count=48); the other with
  NCPL_BASE_PERIOD=hour, GLC_NCPL=2 (results in dt_option=seconds,
  dt_count=1800): glc log files essentially identical (with verbose=.true.)  
  - Note that these runs both died just before the end, with "Unexpected calling
    of GLINT at time 8759", but I don't think that's a problem that I caused
    (but it meant I could not compare hist files)


Other tests:

- modifications via user_nl_cism: just checked the generated cism_in and
  cism.config files to make sure the modifications are picked up
  - changed a cism_in variable: cism_debug
  - changed a cism.config variable: basal_tract

- multi-instance test: 4 instances, with no modifications in user_nl_cism_000*:
  just checked the generated cism_in and cism.config files: paramfile set
  correctly in cism_in_000*; everything else matches a single-instance case

- multi-instance test: 4 instances, with modifications to ihour0 and evolution
  in user_nl_cism_0001 & 0003 (but no changes in 0002 or 0004): just checked the
  generated cism_in and cism.config files

- cism.buildIO.csh:
  - confirmed that the generated script is essentially the same as before
  - added a variable in glide_vars.def, confirmed that all F90 files
    created by cism.buildIO.csh are identical to those from an old
    case with the same change in glide_vars.def

================================================================================
Originator: sacks
Date: March 22, 2012
Model: cism
Version: cism1_120322
One-line summary: fixed memory leak

Purpose of changes:

Fixed memory leak in glint_downscaling_gcm (~ 40 MB/year for some test
runs)

Changes answers relative to previous tag: No

Bugs fixed (include bugzilla ID) (http://bugs.cgd.ucar.edu/):

Known bugs (include bugzilla ID) (http://bugs.cgd.ucar.edu/):
      1433 (time manager needs additional changes to support longer timesteps)
      1441 (time manager doesn't restart properly when last run stopped in the middle of a day)

List all modified files, and describe the changes:

*** Fix memory leak
M       https://svn-ccsm-models.cgd.ucar.edu/glc/trunk_tags/cism1_120123/source_glimmer-cism/glint_climate.F90

*** Fix comment (unrelated change)
M       https://svn-ccsm-models.cgd.ucar.edu/glc/trunk_tags/cism1_120123/test/unit/unit_test_shr/Makefile.common

Summary of testing:

- CESM tests: bluefire.glc.auxtest, with comparison to previous
  version (implemented change in cesm1_1_beta11, compared with
  baseline cesm1_1_beta11). All tests passed except:

  RUN   ERS.T31_g37.IGRCP85CN.bluefire_ibm.C.095358 
  FAIL  SMS.T31_T31.FG20TRCN.bluefire_ibm 
  BFAIL SMS.T31_T31.FG20TRCN.bluefire_ibm.compare_hist.cesm1_1_beta11 
  FAIL  SMS.T31_g37.TG.bluefire_ibm 
  BFAIL SMS.T31_g37.TG.bluefire_ibm.compare_hist.cesm1_1_beta11

  All of these tests also failed in cesm1_1_beta11


- 10-year TG compset using Bill L's recent instructions: f09_g16,
  gland5UM, annual coupling interval using Gail's annual-average cpl
  forcings; evolution=0, dt=ntem=nvel=niso=0.1. Last year of cism hist
  is identical to code without this fix. NOTE: This change was done
  off of an earlier version of cism (cism1_111214), but the change is
  so straightforward that I'm pretty confident that the results should
  translate to the latest version.

================================================================================
Originator: tcraig
Date: Jan 23, 2012
Model: cism
Version: cism1_120123
One-line summary: update esmf to 520r

M       source_glc/glc_io.F90
M       drivers/cpl_mct/glc_comp_mct.F90
================================================================================
Originator: sacks
Date: Dec 21, 2011
Model: cism
Version: cism1_111221
One-line summary: Restore "correct" glc_time_management, with fix for compiler bug

Purpose of changes:

Return glc_time_management to its "correct" state - i.e., before the changes
made in cism1_111220a; introduce unused module variable in glc_time_management
to get around an internal compiler error in xlf. Also, move incorrectly-placed
'implicit none' in glc_time_management_test.F90.

Changes answers relative to previous tag: No, but replaces functionality removed
in cism1_111220a

Bugs fixed (include bugzilla ID) (http://bugs.cgd.ucar.edu/):

Known bugs (include bugzilla ID) (http://bugs.cgd.ucar.edu/):
      1433 (time manager needs additional changes to support longer timesteps)
      1441 (time manager doesn't restart properly when last run stopped in the middle of a day)

List all modified files, and describe the changes:

*** Restore to version prior to cism1_111220a, introduce unused module variable
    to get around internal compiler error
M       source_glc/glc_time_management.F90

*** Move incorrectly-placed 'implicit none'
M       test/unit/time_management/glc_time_management_test.F90


Summary of testing: 

- Tested build for an IGCN case

- Full cesm system tests pending, including bluefire.glc.auxtest with comparison
  to beta07 (needed to create this tag before testing was complete, but I will
  create a new tag if any fail)

================================================================================
Originator: sacks
Date: Dec 20, 2011
Model: cism
Version: cism1_111220a
One-line summary: Rolled back glc_time_management

Purpose of changes:

The cesm build was failing with the new version of glc_time_management. I have
temporarily rolled this file back to the version in 31393.

This should be fixed ASAP!


Changes answers relative to previous tag: No, but removes functionality

Bugs fixed (include bugzilla ID) (http://bugs.cgd.ucar.edu/):

Known bugs (include bugzilla ID) (http://bugs.cgd.ucar.edu/):

List all modified files, and describe the changes:

*** Rolled back
M       source_glc/glc_time_management.F90

Summary of testing: Just tested build

================================================================================
Originator: sacks
Date: Dec 20, 2011
Model: cism
Version: cism1_111220
One-line summary: Updated ChangeLog entry for cism1_111214

Purpose of changes:
  I realized that I hadn't documented the testing done for cism1_111214 entirely
  correctly; I have now fixed this.

Changes answers relative to previous tag: No

Bugs fixed (include bugzilla ID) (http://bugs.cgd.ucar.edu/):

Known bugs (include bugzilla ID) (http://bugs.cgd.ucar.edu/):
      1433 (time manager needs additional changes to support longer timesteps)
      1441 (time manager doesn't restart properly when last run stopped in the middle of a day)

List all modified files, and describe the changes:

*** Update ChangeLog entry for cism1_111214
M       ChangeLog

Summary of testing: None

================================================================================
Originator: mvertens
Date: Dec 18, 2011
Model: cism
Version: cism1_111218
One-line summary: Simplified way that cism field names generated for driver

Purpose of changes:
  Implemented new scheme of determine cism field names that is more flexible
  and robust 

Changes answers relative to previous tag: No

Known bugs (include bugzilla ID) (http://bugs.cgd.ucar.edu/): None

List all modified files, and describe the changes:
M       source_glc/glc_constants.F90
        - no longer set glc_nec to 10 - but determine it from fields set in
	  coupler - consistency check is also made in the land - more
	  robust implemention
M       drivers/cpl_share/glc_cpl_indices.F90
	- new index array for multiple elevation classes now is used instead
	  of hard wired index names for each class - much more extensible 
	  scheme
M       drivers/cpl_mct/glc_comp_mct.F90
        - using changes in glc_cpl_indices - glc_export_mct and glc_import_mct
	  are greatly simplified (no more hard-wiring)
	
Summary of testing: 
Ran IGCN and BGCN system tests and verified that results were bit-for-bit

================================================================================
Originator: sacks
Date: Dec 14, 2011
Model: cism
Version: cism1_111214
One-line summary: Add test driver for glc_time_management

Purpose of changes:

Add a test driver for glc_time_management, along with a list of standard tests
to run. Remove some variables from glc_time_management that aren't being used
and weren't properly preserved in restarts. Add code & makefile that can be used
for future unit testers. Add ChangeLog_template.


Changes answers relative to previous tag: No


Bugs fixed (include bugzilla ID) (http://bugs.cgd.ucar.edu/):

Known bugs (include bugzilla ID) (http://bugs.cgd.ucar.edu/):
      1433 (time manager needs additional changes to support longer timesteps)
      1441 (time manager doesn't restart properly when last run stopped in the middle of a day)


List all modified files, and describe the changes:

*** Remove unused variables that aren't preserved in restarts
M       source_glc/glc_time_management.F90

*** Add code & makefile that can be used for any cism unit tester
A       test  
A       test/unit 
A       test/unit/unit_test_replacements 
A       test/unit/unit_test_replacements/glc_communicate.F90
A       test/unit/unit_test_replacements/shr_sys_mod.F90
A       test/unit/unit_test_replacements/README
A       test/unit/unit_test_shr/writevar_mod.F90
A       test/unit/unit_test_shr/Makefile.common
A       test/unit/unit_test_shr/README
A       test/unit/unit_test_shr

*** Add test driver for the glc_time_management module
A       test/unit/time_management 
A       test/unit/time_management/README 
A       test/unit/time_management/Filepath
A       test/unit/time_management/Srcfiles 
A       test/unit/time_management/Makefile
A       test/unit/time_management/glc_time_management_test_mod.F90
A       test/unit/time_management/glc_time_management_test.F90

*** Script to run exact restart test using the time management test driver
A       test/unit/time_management/restart_test

*** Add list of tests to be run with the time management test driver
A       test/unit/time_management/restart_testlist
A       test/unit/time_management/testlist

*** Namelists for each of the standard tests to run using the time management
    test driver and the restart_test script (note: I am not listing all of the
    individual files added in this directory)
A       test/unit/time_management/inputs

*** Add ChangeLog_template to be used for new ChangeLog entries
A       ChangeLog_template


Summary of testing: No system tests, but many unit tests

- test/unit/time_management (tests in testlist & restart_testlist; for testlist,
  performed regression tests against code similar to cism1_111026 where
  possible, manually checked output where regression tests were impossible -
  e.g., where the old code was buggy):

Note that there is a known bug in newhour (see bug 1433). I am considering tests
to have passed even if they have the wrong newhour value. Also, since I didn't
do a careful look at every variable output by the test driver, it's possible
that there are errors in other variables that I didn't catch. Here, I am just
listing tests that have failures in variables that I checked, other than
newhour (variables I checked more carefully were: iyear, imonth, iday,
seconds_this_day, eoy, eom, eod, adjust_nyears, elapsed_days, elapsed_months,
elapsed_years).

All pass except:

  oneyear_leap: model doesn't run to completion (see bug 1433)

  threeyear_leap: also has problems related to bug 1433, though here the model
    runs to completion

  219day_leap: also has problems related to bug 1433; the first error I notice
    is that year 5, day_of_year 73 is translated to 0005-mar-13 rather than
    0005-mar-14, but there are likely other errors, too, as for oneyear_leap

  511day_leap: also has problems relatd to bug 1433; e.g., both the leap and the
    non-leap tests have a time step with time stamp 0005-mar-15; the leap should
    differ


================================================================================
Originator: sacks
Date: Nov 22, 2011
Model: cism
Version: cism1_111122
One-line summary: Modified time manager to support longer time steps

Previously, the time manager did not correctly handle time steps longer
than one month. With the changes here, time steps as long as desired
should be possible. However, as noted below, I have only tested this for
daily and annual time steps so far.
	
M       source_glc/glc_time_management.F90

pretag testing: so far I have tested this for daily and annual time steps;
more testing is needed of other length time steps

	- 10-year TG compset with daily time step (i.e., the default),
	using gland10 and 10 years of forcing from a af19_g16 IG compset:
	last year of cism history output identical to a similar run set up
	using old version; cism log files also essentially identical

	- Similar to the above, but with annual time step & annual
	coupling interval. This was set up by (1) averaging the 10 years
	of cpl history files into annual-average files; (2) explicitly
	setting atm_cpl_dt to 31536000, and the same for other components,
	in cpl.buildnml.csh; (3) changing dt_option from steps_per_day to
	steps_per_year in cism.buildnml.csh. Last year of cism history
	output identical to the daily run; cism log files also show
	correct time stepping

	- exact restart, daily time step: similar to daily time step run
	above, but two 5-year runs; checked last year of history file
	against the above 10-year run

	- exact restart, annual time step: similar to annual time step run
	above, but two 5-year runs; checked last year of history file
	against the above 10-year run

================================================================================
Originator: sacks
Date: Oct 26, 2011
Model: cism
Version: cism1_111026
One-line summary: change ntem default to 1000000. for gland5UM

This turns off ice temperature evolution (I think) -- at least, as long as
you are running for less than 1000000 years. This change should have been
made at the same time as the creation of ice.config.gland5UM, when
evolution was (correctly) set to -1.
	
M       input_templates/ice.config.gland5UM

pretag testing: NONE

================================================================================
Originator: jwolfe
Date:
Model: cism
Version: cism1_111007
One-line summary: add support for new GLC_GRID gland5UM

M       bld/cism.cpl7.template
A       input_templates/ice.config.gland5UM

================================================================================
Originator: sacks, lipscomb
Date: Oct 4, 2011
Model: cism
Version: cism1_111004
One-line summary: allow evolution=-1; reformat glimmer_ncio.F90 to satisfy
      		  some compilers

* Allow evolution=-1 -- i.e., no thickness evolution
M       source_glimmer-cism/glide.F90
M       source_glimmer-cism/glide_setup.F90

* Reformat to satisfy some compilers
M       source_glimmer-cism/glimmer_ncio.F90

pretag testing:
	- 10-year TG compsets before and after these modifications
	(evolution=0 in both cases), using a single year of forcing from a
	f19_g16 IG compset: last year of cism history output identical

	- 10-year TG compset with evolution=-1, compared with the above
	evolution=0 case: last year of cism history output differs, as
	expected (but didn't evaluate whether the differences make sense)

================================================================================
Originator: jwolfe, lipscomb
Date: Mon Apr 18, 2011
Model: cism
Version: cism1_110418
One-line summary: changes to make restarts completely functional for branch
                  and hybrid runs, using the glimmer-cism native hotstart
                  capability

M       bld/cism.cpl7.template
M       input_templates/ice.config.gland10
M       input_templates/ice.config.gland20
M       input_templates/ice.config.gland5

================================================================================
Originator: jwolfe, lipscomb
Date: Mon Mar 07, 2011
Model: cism
Version: cism1_110307
One-line summary: modify input templates to remove setting native glimmer-cism
                  history output files, which interferes with creating CESM-style
                  history output

M       input_templates/ice.config.gland10
M       input_templates/ice.config.gland20
M       input_templates/ice.config.gland5

pretag testing: Results are bfb relative to cesm1_0_beta15 for ERI.f19_f19.FG.bluefire

================================================================================
Originator: jwolfe, lipscomb
Date: Sun Feb 20, 2011
Model: cism
Version: cism1_110220
One-line summary: reworked the way CISM handles history files, to more closely
                  follow CESM naming conventions and alarms

M       bld/cism.cpl7.template
M       source_glc/glc_InitMod.F90
M       source_glc/glc_io.F90
M       drivers/cpl_mct/glc_comp_mct.F90

pretag testing: Results are bfb relative to cesm1_0_beta15 for ERI.f19_f19.FG.bluefire

================================================================================
Originator: fischer
Date: Tue Jan 25, 2011
Model: cism
Version: cism1_110125
One-line summary: renamed glint_smb.F90 to smb_dummy.F90

A      source_glimmer-cism/smb_dummy.F90
D      source_glimmer-cism/glint_smb.F90

================================================================================
Originator: mvertens
Date: Mon Jan 24, 2011
Model: cism
Version: cism1_110124
One-line summary: removed use seq_flds_indices, now using local glc_cpl_indices_set

A       drivers/cpl_share
A       drivers/cpl_share/glc_cpl_indices.F90
M       drivers/cpl_mct/glc_comp_mct.F90
	
pretag testing: Results are bfb relative to cesm1_0_beta14 for ERI.f19_f19.FG.bluefire
	
================================================================================
Originator: jwolfe, lipscomb
Date: Sep 13, 2010
Model: cism
Version: cism1_100913
One-line summary: add more capabilities, clean-up

* pull vars.def files together along with template and python script, to
  allow users to modify the IO list on a per case basis
A      bld/cismIO
A      bld/cismIO/glide_lithot_vars.def
A      bld/cismIO/README.cismIO
A      bld/cismIO/glint_mbal_vars.def
A      bld/cismIO/glint_vars.def
A      bld/cismIO/ncdf_template.F90.in
A      bld/cismIO/glide_vars.def
A      bld/cismIO/generate_ncvars.py
M      bld/cism.cpl7.template

* make GLC_DEBUG a variable instead of an IFDEF
M      source_glimmer-cism/glide.F90
M      source_glimmer-cism/glint_timestep.F90
M      source_glimmer-cism/glint_climate.F90
M      source_glimmer-cism/glimmer_paramets.F90
M      source_glimmer-cism/glide_diagnostics.F90
M      source_glimmer-cism/glint_main.F90
M      source_glimmer-cism/glint_interp.F90
M      source_glimmer-cism/glint_type.F90

* reworked restart to keep glc calls out of glimmer-cism
M      source_glc/glc_InitMod.F90
M      source_glc/glc_io.F90
A      source_glimmer-cism/glimmer_restart_gcm.F90
M      source_glimmer-cism/glint_initialise.F90
M      source_glimmer-cism/glimmer_config.F90

* fixed configuration files to make other resolutions work correctly
M      input_templates/ice.config.gland10
M      input_templates/ice.config.gland20
M      input_templates/ice.config.gland5

================================================================================
Originator: jwolfe, lipscomb
Date: Jun 17, 2010
Model: cism
Version: cism1_100617a
One-line summary: keep use statement for shr_file_mod (temporarily)

M      source_glimmer-cism/glimmer_config.F90

================================================================================
Originator: jwolfe, lipscomb
Date: Jun 17, 2010
Model: cism
Version: cism1_100617
One-line summary: pick up mods to glc_comp from Bill L's sandbox

M      drivers/cpl_mct/glc_comp_mct.F90

================================================================================
Originator: jwolfe, lipscomb
Date: Jun 16, 2010
Model: cism
Version: cism1_100616a
One-line summary: change Filepath to refer to new drivers directory

M      bld/cism.cpl7.template

================================================================================
Originator: jwolfe, lipscomb
Date: Jun 16, 2010
Model: cism
Version: cism1_100616
One-line summary: rearrange driver code for future esmf support, clean-up

* rearrange driver code for future esmf support
D      source_glc/glc_comp_mct.F90
A      drivers
A      drivers/cpl_mct
A      drivers/cpl_mct/glc_comp_mct.F90
A      drivers/cpl_esmf

* remove unused code
D      source_glc/glc_domain_size.F90
D      source_glimmer-cism/glimmer_restart_statarr.F90
D      source_glimmer-cism/glimmer_restart_pointarr.F90
D      source_glimmer-cism/glimmer_restart_common.F90
D      source_glimmer-cism/glimmer_restart.F90
D      source_glimmer-cism/glimmer_restart_statscal.F90

* fixed input template files for different resolutions
M      input_templates/ice.config.gland10
M      input_templates/ice.config.gland20
M      input_templates/ice.config.gland5

* enhanced I/O to fix restart issue
M      source_glimmer-cism/glint_io.F90
M      source_glimmer-cism/glide_lithot_io.F90
M      source_glimmer-cism/glint_mbal_io.F90
M      source_glimmer-cism/glide_io.F90

* clean-up and fix documentation
M      source_glc/glc_InitMod.F90
M      source_glc/glc_RunMod.F90
M      source_glc/glc_global_grid.F90
M      source_glc/glc_io.F90
M      source_glc/glc_constants.F90
M      source_glc/glc_global_fields.F90
M      source_glc/glc_FinalMod.F90
M      source_glc/glc_time_management.F90
M      source_glimmer-cism/glide.F90
M      source_glimmer-cism/glimmer_scales.F90
M      source_glimmer-cism/glint_timestep.F90
M      source_glimmer-cism/glide_thck.F90
M      source_glimmer-cism/isostasy_setup.F90
M      source_glimmer-cism/isostasy_el.F90
M      source_glimmer-cism/glide_nc_custom.F90
M      source_glimmer-cism/isostasy_types.F90
M      source_glimmer-cism/glimmer_ts.F90
M      source_glimmer-cism/glimmer_routing.F90
M      source_glimmer-cism/glimmer_searchcircle.F90
M      source_glimmer-cism/glimmer_daily_pdd.F90
M      source_glimmer-cism/xls.F90
M      source_glimmer-cism/glint_mbal.F90
M      source_glimmer-cism/glide_temp.F90
M      source_glimmer-cism/glint_climate.F90
M      source_glimmer-cism/glimmer_utils.F90
M      source_glimmer-cism/glimmer_map_init.F90
M      source_glimmer-cism/glimmer_anomcouple.F90
M      source_glimmer-cism/glimmer_filenames.F90
M      source_glimmer-cism/glimmer_ncparams.F90
M      source_glimmer-cism/glimmer_writestats.F90
M      source_glimmer-cism/glint_initialise.F90
M      source_glimmer-cism/glimmer_paramets.F90
M      source_glimmer-cism/glimmer_vers.F90
M      source_glimmer-cism/glide_lithot1d.F90
M      source_glimmer-cism/glimmer_map_CFproj.F90
M      source_glimmer-cism/glide_mask.F90
M      source_glimmer-cism/glide_profile.F90
M      source_glimmer-cism/glide_setup.F90
M      source_glimmer-cism/glimmer_map_proj4.F90
M      source_glimmer-cism/glide_types.F90
M      source_glimmer-cism/glide_velo.F90
M      source_glimmer-cism/glimmer_global.F90
M      source_glimmer-cism/glimmer_map_types.F90
M      source_glimmer-cism/glimmer_deriv.F90
M      source_glimmer-cism/glimmer_ncdf.F90
M      source_glimmer-cism/glimmer_coordinates.F90
M      source_glimmer-cism/kelvin.F90
M      source_glimmer-cism/glide_stop.F90
M      source_glimmer-cism/ncdf_utils.F90
M      source_glimmer-cism/glint_example_clim.F90
M      source_glimmer-cism/glimmer_log.F90
M      source_glimmer-cism/glimmer_integrate.F90
M      source_glimmer-cism/glint_precip_param.F90
M      source_glimmer-cism/glint_global_grid.F90
M      source_glimmer-cism/glimmer_sparse.F90
M      source_glimmer-cism/glint_constants.F90
M      source_glimmer-cism/glide_diagnostics.F90
M      source_glimmer-cism/isostasy.F90
M      source_glimmer-cism/glint_global_interp.F90
M      source_glimmer-cism/glimmer_config.F90
M      source_glimmer-cism/glint_main.F90
M      source_glimmer-cism/glimmer_pdd.F90
M      source_glimmer-cism/glint_mpinterp.F90
M      source_glimmer-cism/glint_interp.F90
M      source_glimmer-cism/glide_lithot3d.F90
M      source_glimmer-cism/glimmer_physcon.F90
M      source_glimmer-cism/glimmer_map_trans.F90
M      source_glimmer-cism/profile.F90
M      source_glimmer-cism/glimmer_ncio.F90
M      source_glimmer-cism/glide_lithot.F90
M      source_glimmer-cism/glint_mbal_coupling.F90
M      source_glimmer-cism/glint_smb.F90
M      source_glimmer-cism/glint_type.F90

================================================================================
Originator: jwolfe
Date: Jun 08, 2010
Model: cism
Version: cism1_100608
One-line summary: Additional resolution support, fix calendar bug

M      bld/cism.cpl7.template
M      source_glc/glc_io.F90
M      source_glc/glc_time_management.F90

================================================================================
Originator: jwolfe
Date: Jun 03, 2010
Model: cism
Version: cism1_100603
One-line summary: Update cpl7 template to work correctly with hybrid and branch runs

M      bld/cism.cpl7.template

================================================================================
Originator: jwolfe
Date: May 25, 2010
Model: cism
Version: cism1_100525a
One-line summary: patch to new tag, deleting one file that no longer belongs

D      source_glc/glc_glint_interp.F90

================================================================================
Originator: jwolfe
Date: May 25, 2010
Model: cism
Version: cism1_100525
One-line summary: initial commit of cism1, which is more-or-less the same as
                  $SVN/glc/branch_tags/glimmer-cism-gcm_tags/glimmer-cism-gcm03_glc4_100301
                  except the var.def files have been removed from the bld as well
                  as the scripts to handle them.  CSEG decided not to require
                  python, which one of the scripts uses, so the resulting _io.F90
                  files are included in source_glimmer-cism instead.

A      source_slap
A      source_slap/dmset.F
A      source_slap/dlaputil.F
A      source_slap/xersla.F
A      source_slap/dcgs.F
A      source_slap/blas.F
A      source_slap/dmvops.F
A      source_slap/mach.F
D      bld/namelist_definition_gglc.xml
M      bld/configure
M      bld/config_definition.xsl
D      bld/gglc.cpl7.template
M      bld/README
A      bld/namelist_definition_cism.xml
D      bld/namelist_defaults_gglc.xml
A      bld/cism.cpl7.template
M      bld/build-namelist
M      bld/config_definition.xml
A      bld/namelist_defaults_cism.xml
M      source_glc/glc_glint_interp.F90
M      source_glc/glc_comp_mct.F90
M      source_glc/glc_InitMod.F90
M      source_glc/glc_RunMod.F90
M      source_glc/glc_global_grid.F90
M      source_glc/glc_io.F90
M      source_glc/glc_constants.F90
M      source_glc/glc_global_fields.F90
M      source_glc/glc_time_management.F90
A      source_glimmer-cism
A      source_glimmer-cism/glide.F90
A      source_glimmer-cism/glimmer_scales.F90
A      source_glimmer-cism/glint_timestep.F90
A      source_glimmer-cism/glide_thck.F90
A      source_glimmer-cism/glide_lithot_io.F90
A      source_glimmer-cism/isostasy_setup.F90
A      source_glimmer-cism/isostasy_el.F90
A      source_glimmer-cism/glide_nc_custom.F90
A      source_glimmer-cism/glint_mbal_io.F90
A      source_glimmer-cism/glimmer_restart_statarr.F90
A      source_glimmer-cism/isostasy_types.F90
A      source_glimmer-cism/glimmer_ts.F90
A      source_glimmer-cism/glimmer_routing.F90
A      source_glimmer-cism/glimmer_searchcircle.F90
A      source_glimmer-cism/glimmer_daily_pdd.F90
A      source_glimmer-cism/xls.F90
A      source_glimmer-cism/glint_mbal.F90
A      source_glimmer-cism/glide_temp.F90
A      source_glimmer-cism/glint_climate.F90
A      source_glimmer-cism/glimmer_utils.F90
A      source_glimmer-cism/glimmer_map_init.F90
A      source_glimmer-cism/glimmer_anomcouple.F90
A      source_glimmer-cism/glimmer_restart_pointarr.F90
A      source_glimmer-cism/glimmer_filenames.F90
A      source_glimmer-cism/glimmer_ncparams.F90
A      source_glimmer-cism/glimmer_writestats.F90
A      source_glimmer-cism/glint_initialise.F90
A      source_glimmer-cism/glimmer_paramets.F90
A      source_glimmer-cism/glimmer_vers.F90
A      source_glimmer-cism/glide_lithot1d.F90
A      source_glimmer-cism/glimmer_map_CFproj.F90
A      source_glimmer-cism/glide_mask.F90
A      source_glimmer-cism/glint_io.F90
A      source_glimmer-cism/glide_profile.F90
A      source_glimmer-cism/glide_setup.F90
A      source_glimmer-cism/glimmer_map_proj4.F90
A      source_glimmer-cism/glimmer_restart_common.F90
A      source_glimmer-cism/glide_types.F90
A      source_glimmer-cism/glide_velo.F90
A      source_glimmer-cism/glimmer_global.F90
A      source_glimmer-cism/glimmer_map_types.F90
A      source_glimmer-cism/glimmer_deriv.F90
A      source_glimmer-cism/glimmer_coordinates.F90
A      source_glimmer-cism/glimmer_ncdf.F90
A      source_glimmer-cism/kelvin.F90
A      source_glimmer-cism/glide_stop.F90
A      source_glimmer-cism/ncdf_utils.F90
A      source_glimmer-cism/glint_example_clim.F90
A      source_glimmer-cism/glimmer_log.F90
A      source_glimmer-cism/glimmer_integrate.F90
A      source_glimmer-cism/glint_precip_param.F90
A      source_glimmer-cism/glimmer_restart.F90
A      source_glimmer-cism/glint_global_grid.F90
A      source_glimmer-cism/glimmer_sparse.F90
A      source_glimmer-cism/glint_constants.F90
A      source_glimmer-cism/glide_diagnostics.F90
A      source_glimmer-cism/isostasy.F90
A      source_glimmer-cism/glint_global_interp.F90
A      source_glimmer-cism/glimmer_config.F90
A      source_glimmer-cism/glint_main.F90
A      source_glimmer-cism/glimmer_pdd.F90
A      source_glimmer-cism/glint_mpinterp.F90
A      source_glimmer-cism/glint_interp.F90
A      source_glimmer-cism/glide_lithot3d.F90
A      source_glimmer-cism/glimmer_restart_statscal.F90
A      source_glimmer-cism/glimmer_physcon.F90
A      source_glimmer-cism/profile.F90
A      source_glimmer-cism/glimmer_map_trans.F90
A      source_glimmer-cism/glimmer_ncio.F90
A      source_glimmer-cism/glide_lithot.F90
A      source_glimmer-cism/glint_mbal_coupling.F90
A      source_glimmer-cism/glide_io.F90
A      source_glimmer-cism/glint_type.F90
A      source_glimmer-cism/glint_smb.F90
M      ChangeLog
D      source_glimmer
A      input_templates/ice.config.gland10
M      input_templates/ice.config.gland20
A      input_templates/ice.config.gland5
M      README

================================================================================
Originator: jwolfe
Date: May 07, 2010
Model: glc
Version: glc4_100507
One-line summary: bug fixes and clean up

* replace hard-wired unit numbers with calls to shr_file_getunit
M      source_glimmer/glimmer_ts.F90
M      source_glimmer/glimmer_config.F90

* clean up unused files
D      input_templates/glc_in.jw
D      input_templates/glc_in

* rename "ice.config" file to "cism.config"
M      bld/gglc.cpl7.template
M      bld/namelist_defaults_gglc.xml

================================================================================
Originator: jwolfe
Date: Mar 30, 2010
Model: glc
Version: glc4_100330
One-line summary: CCSMize output filenames, add tools for creating overlap files,
                  bug fix

* CCSMize output filenames
A      source_glc/glc_io.F90
M      bld/gglc.cpl7.template
M      input_templates/ice.config.gland20
M      source_glimmer/glint_initialise.F90

* Add tools for creating overlap files
A      tools
A      tools/README.glc_tools
A      tools/README.glc_overlap_tools
A      tools/glc2scripConvert.ncl
A      tools/scrip_make_wgts_CCSM_to_GLC_bilin.csh
A      tools/scrip2CLMoverlap.ncl

* Fix bug that closed log file before the end of output
M      source_glimmer/glint_main.F90

================================================================================
Originator: jwolfe
Date: Mar 16, 2010
Model: glc
Version: glc4_100316
One-line summary: Support for fracdata files for downscaling

* Changed output for gglc.buildnml.csh to point at fracdata file
M      bld/gglc.cpl7.template

* The following files were changed Bill Lipscomb to support the use of fracdata
  files for downscaling:
M      source_glc/glc_InitMod.F90
M      source_glc/glc_comp_mct.F90
M      source_glc/glc_constants.F90
M      source_glc/glc_global_grid.F90
M      source_glc/glc_glint_interp.F90
M      source_glimmer/glint_global_grid.F90
M      source_glimmer/glint_interp.F90
M      source_glimmer/glint_main.F90
M      source_glimmer/glint_mbal_coupling.F90
M      source_glimmer/glint_timestep.F90

================================================================================
Originator: jwolfe
Date: Mar 01, 2010
Model: glc
Version: glc4_100301
One-line summary: Set test cell information in code based on global grid size,
                  instead of set as parameters in glc_constants (caused a
                  problem with T31 grid)

M      source_glc/glc_global_grid.F90 ----- Added test cell settings based on
                                            global grid size
M      source_glc/glc_constants.F90 ------- Removed parameter attribute from 
                                            test cell constants

================================================================================
Originator: erik
Date: Nov 03, 2009
Model: glc
Version: glc4_091103
One-line summary: Point to checked in version of topo files, add documentation,
                  add config files to buildnml script so can change, start adding
                  xml support.

M      bld/gglc.cpl7.template -------------- Point to checked in version of topo files
                                             Add documentation and put config file in
                                             the buildnml script so can be changed by
                                             the user. Start adding flexibility for
                                             support for different GLC grids.

A      bld/README -------------------------- Document files in the build directory
A      bld/namelist_defaults_gglc.xml ------ GGLC specific namelist defaults
A      bld/namelist_definition_gglc.xml ---- GGLC specific namelist defintion
A      bld/namelist_defaults_overall.xml --- Overall namelist defaults
A      bld/namelist_definition_overall.xml - Overall namelist defintion
A      bld/namelist_defaults.xsl ----------- Style sheet to display defaults as html
A      bld/namelist_definition.xsl --------- Style sheet to display definition as html

Some scripts starting to add that do NOT work yet.

A      bld/build-namelist ----------------- Start adding a build-namelist (not working yet)
A      bld/configure ---------------------- Start adding a configure      (not working yet)
A      bld/configure_definition.xml ------- Definition of configurations
A      bld/configure_definition.xsl ------- Style sheet to display definition as html

================================================================================
Originator: lipscomb
Date: Oct 27, 2009
Model: glc
Version: glc4_091027
One-line summary: Add glimmer log file and add greenland 20km config file

  M  source_glc/glc_InitMod.F90 ---------- Change glimmer log file
  M  source_glimmer/glimmer_log.F90 ------ Add subroutine to change glimmer log
  M  input_templates/ice.config.gland20 -- Add greenland 20km config file

================================================================================
Originator: erik
Date: Aug 14, 2009
Model: glc
Version: glc4_090814
One-line summary:  Template changes to allow multiple grid files

Set up grid files for 48x96, 1.9x.25, and 0.9x1.25 resolutions. Abort
if it isn't one of those. Also remove the coupled_nml namelist as not needed,
and set the stop_option to never, since, the coupler will tell it to stop.

M      bld/gglc.cpl7.template

================================================================================
Originator: lipscomb
Date: Aug 13, 2009
Model: glc
Version: glc4_090813
One-line summary:  Latest changes from Bill Lipscomb

Mostly changes to get time-management working correctly. Also
make sure proper mask of r8 for some variables. Update some of
the documentation and formatting.

M   README
M   source_glc/glc_glint.F90
M   source_glc/glc_comp_mct.F90
M   source_glc/glc_InitMod.F90
M   source_glc/glc_RunMod.F90
M   source_glc/glc_global_grid.F90
M   source_glc/glc_FinalMod.F90
M   source_glc/glc_time_management.F90
M   source_glimmer/glide.F90
M   source_glimmer/glint_initialise.F90
M   source_glimmer/glimmer_ncio.F90

================================================================================
Originator: tcraig
Date: Fri Jan 16, 2009
Model: glc
Version: glc4_090116
One-line summary:  Upgrade from ccsm3 to ccsm4 coupling

- Try not to touch any glimmer code	
- Delete unusued code and remove use of unused code from used code as needed
- Add bld and gglc.cpl7.template
- Delete glc.F90 and add glc_comp_mct.F90 for migration from ccsm3 to ccsm4
- Update the stdout, stderr, and nml unit numbers to be set from shr_file_getunit,
  eliminate use of local get_unit in favor of shr_file_getunit in glc
- Migrate all use of unit 6 to stdout in all source_glc code.  includes write,
  print, and flush statements.  this was not done to glimmer.
- Add a shr_sys_abort to source_glimmer/glimmer_log.F90 before the stop to
  prevent ccsm4 hang from glimmer abort.  (there are probably more calls to
  stop that need to be fixed in the code).
- Get rid of use and reference to ccsm3 coupling code
- Update initialization of glc communicator from ccsm4 driver

Other potential issues still not addressed
- other unit numbers hardwired in glc/glimmer
- use of stop, proper aborts
- reference to gland20.input.nc file from ice.config input file
- hardwired glc_nec = 10
- hardwired T31 resolution
- glimmer mostly writes to unit 6
- restart flag captured in coupling interface but not used
	
A      bld
A      bld/gglc.cpl7.template
D      mpi/glc_gather_scatter.F90
D      mpi/glc_global_reductions.F90
D      mpi/glc_broadcast.F90
D      mpi/glc_boundary.F90
D      mpi/glc_timers.F90
M      mpi/glc_communicate.F90
A      source_glc/glc_comp_mct.F90
D      source_glc/glc_fileunits.F90
M      source_glc/glc_InitMod.F90
M      source_glc/glc_RunMod.F90
M      source_glc/glc_global_grid.F90
D      source_glc/glc_domain.F90
M      source_glc/glc_exit_mod.F90
M      source_glc/glc_constants.F90
M      source_glc/glc_glint.F90
D      source_glc/glc_blocks.F90
D      source_glc/glc_distribution.F90
D      source_glc/glc.F90
M      source_glc/glc_FinalMod.F90
M      source_glc/glc_ErrorMod.F90
M      source_glc/glc_time_management.F90
D      source_glc/glc_coupled.F90
D      source_glc/glc_io_types.F90
M      source_glimmer/glimmer_log.F90
	
================================================================================
Originator: tcraig
Date: Oct 17, 2009
Model: glc
Version: glc_081017
One-line summary:  Port to bluefire, update usability

M       input_templates/glc_in
  update input file paths to bluefire inputdata area
	        
================================================================================
Originator: 
Date: 
Model: glc
Version: glc_080817
One-line summary: 
Changes made: 

================================================================================

Originator: jwolfe
Date: Mon Nov  5 13:39:33 MST 2007
Model: glc
Version: glc_071105
One-line summary: update to include all of Bll Lipscomb's new changes
Changes made: 

?      source_glc/glc_glint.F90
?      source_glc/glc_global_fields.F90
?      source_glc/glc_coupled.F90
?      source_glc/glc_global_grid.F90
?      source_glc/POP_files/grid.F90
M      source_glc/glc_domain_size.F90
M      source_glc/glc_InitMod.F90
M      source_glc/glc_RunMod.F90
M      source_glc/glc_domain.F90
M      source_glc/glc_io.F90
M      source_glc/glc_kinds_mod.F90
M      source_glc/glc_constants.F90
M      source_glc/glc.F90
M      source_glc/glc_FinalMod.F90
M      source_glc/glc_ErrorMod.F90
M      source_glc/glc_IOUnitsMod.F90
M      source_glc/glc_time_management.F90
M      source_glimmer/glint_timestep.F90
M      source_glimmer/glint_initialise.F90
M      source_glimmer/glint_example_clim.F90
M      source_glimmer/glint_main.F90
M      source_glimmer/glint_interp.F90
M      input_templates/glc_in

================================================================================
