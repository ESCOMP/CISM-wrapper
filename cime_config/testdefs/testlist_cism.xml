<?xml version="1.0"?>
<testlist version="2.0">

  <test name="ERI_Ly15" grid="f09_g16_gl20" compset="T1850G">
    <machines>

      <machine name="edison" compiler="intel" category="prebeta">
        <options>
          <option name="wallclock">0:20</option>
        </options>
      </machine>

      <machine name="yellowstone" compiler="pgi" category="aux_glc">
        <options>
          <option name="wallclock">0:20</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="ERI_Ly44" grid="f09_g16_gl5" compset="T1850G1">
    <machines>

      <machine name="hobart" compiler="intel" category="prebeta">
        <options>
          <option name="wallclock">1:59</option>
        </options>
      </machine>

      <machine name="yellowstone" compiler="intel" category="aux_glc">
        <options>
          <option name="wallclock">0:30</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="ERS_D_Ld9" grid="f10_f10_musgs" compset="I1850Clm50SpG" testmods="cism/override_glc_frac">
    <machines>

      <machine name="yellowstone" compiler="pgi" category="aux_glc">
        <options>
          <option name="wallclock">0:30</option>
          <option name="comment">Make sure glc override options work correctly, and restart properly. Note that we do not generate cism history files in this test, but that is okay: this test is about what is sent to the coupler, not what is output by CISM. (And currently CISM history files do not restart properly in this test.)</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="ERS_Ly11" grid="f09_g16_gl20" compset="T1850G">
    <machines>

      <machine name="yellowstone" compiler="gnu" category="aux_glc">
        <options>
          <option name="wallclock">0:20</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="ERS_Ly11" grid="f09_g16_gl20" compset="T1850G" testmods="cism/oneway">
    <machines>

      <machine name="yellowstone" compiler="gnu" category="aux_glc">
        <options>
          <option name="wallclock">0:20</option>
          <option name="comment">(3-3-16) identical to an existing non-oneway test, which generates some non-zero runoff fluxes</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="ERS_D_Ly3" grid="f09_g16_gl5" compset="T1850G1" testmods="cism/noevolve">
    <machines>

      <machine name="yellowstone" compiler="gnu" category="aux_glc">
        <options>
          <option name="wallclock">0:20</option>
          <option name="comment">ice evolution off is the typical operation of cism within cesm, so test that for both CISM1 and CISM2</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="ERS_D_Ly3" grid="f09_g16_gl4" compset="T1850G" testmods="cism/noevolve">
    <machines>

      <machine name="yellowstone" compiler="pgi" category="aux_glc">
        <options>
          <option name="wallclock">0:30</option>
          <option name="comment">ice evolution off is the typical operation of cism within cesm, so test that for both CISM1 and CISM2</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="ERS_Ly20_N2_P2" grid="f09_g16_gl20" compset="T1850G1">
    <machines>

      <machine name="yellowstone" compiler="pgi" category="aux_glc">
        <options>
          <option name="wallclock">0:20</option>
        </options>
      </machine>

      <machine name="cheyenne" compiler="intel" category="prealpha">
        <options>
          <option name="wallclock">0:20</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="ERI_N2_Ly9" grid="f09_g16_gl20" compset="T1850G">
    <machines>

      <machine name="yellowstone" compiler="intel" category="aux_glc">
        <options>
          <option name="wallclock">0:30</option>
          <option name="comment">Include a multi-instance ERI test to catch problems with multi-instance branch/hybrid runs</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="ERS_Ly3" grid="f09_g16_gl4" compset="T1850G">
    <machines>

      <machine name="bluewaters" compiler="pgi" category="prebeta">
        <options>
          <option name="wallclock">0:50</option>
          <option name="comment">included simply to have a test on bluewaters</option>
        </options>
      </machine>

      <machine name="yellowstone" compiler="intel" category="aux_glc">
        <options>
          <option name="wallclock">0:20</option>
          <option name="comment">include one test of the typical production resolution for CISM2</option>
        </options>
      </machine>

      <machine name="cheyenne" compiler="intel" category="prealpha">
        <options>
          <option name="wallclock">0:20</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="ERS_Ly3" grid="f10_f10_musgs" compset="I1850Clm50SpG">
    <machines>

      <machine name="yellowstone" compiler="intel" category="aux_glc">
        <options>
          <option name="wallclock">1:59</option>
          <!-- 2016-10-25: There is a big jump in memory at the start of year
               2. In the 5-year run, things then stay roughly constant after
               that. Note that the start of year 2 is when CISM does its first
               prognostic solve, so I think this is expected behavior. Thus, I
               believe this is not actually a problem. -->
          <option name="memleak_tolerance">0.34</option>
          <option name="comment">Need IG ERS test to catch problems with fields sent before the end of the first year after restart. Also note that this is the only multi-year non-TG test in the test list, so this is the one test that a production-like configuration can run for a few years.</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="ERS_Lm24" grid="f10_f10_musgs" compset="I1850Clm50SpG">
    <machines>

      <machine name="yellowstone" compiler="intel" category="aux_glc">
        <options>
          <option name="wallclock">1:59</option>
          <!-- 2016-10-25: At least in the ERS_Ly5 test: There is a big jump in
               memory at the start of year 2. In the 5-year run, things then
               stay roughly constant after that. Note that the start of year 2
               is when CISM does its first prognostic solve, so I think this is
               expected behavior. Thus, I believe this is not actually a
               problem. -->
          <option name="memleak_tolerance">0.34</option>
          <option name="comment">Mid-year exact restart test</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="ERI_Lm24" grid="f10_f10_musgs" compset="I1850Clm50SpG">
    <machines>

      <machine name="yellowstone" compiler="intel" category="aux_glc">
        <options>
          <option name="wallclock">1:59</option>
          <!-- 2016-10-25: At least in the ERS_Ly5 test: There is a big jump in
               memory at the start of year 2. In the 5-year run, things then
               stay roughly constant after that. Note that the start of year 2
               is when CISM does its first prognostic solve, so I think this is
               expected behavior. Thus, I believe this is not actually a
               problem. -->
          <option name="memleak_tolerance">0.34</option>
          <option name="comment">Test branching mid-year</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="ERI" grid="f10_f10_musgs" compset="I1850Clm50SpG" testmods="cism/test_coupling">
    <machines>

      <machine name="yellowstone" compiler="intel" category="aux_glc">
        <options>
          <option name="wallclock">0:30</option>
          <option name="comment">Changes often break the test_coupling testmod, so include an ERI test with this testmod to help catch these problems</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="NCK_Ly3" grid="f09_g16_gl20" compset="T1850G">
    <machines>

      <machine name="hobart" compiler="pgi" category="prebeta">
        <options>
          <option name="wallclock">1:59</option>
        </options>
      </machine>

      <machine name="yellowstone" compiler="pgi" category="aux_glc">
        <options>
          <option name="wallclock">0:20</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="SMS_D" grid="T31_g37_gl20" compset="I1850Clm50SpG" testmods="cism/test_coupling">
    <machines>

      <machine name="yellowstone" compiler="gnu" category="aux_glc">
        <options>
          <option name="wallclock">0:30</option>
          <option name="comment">Basically duplicates a similar test on hobart_nag; I want a version on yellowstone so we do not need to do baseline comparisons on hobart</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="SMS_D" grid="f09_g16_gl20" compset="T1850G1">
    <machines>

      <machine name="yellowstone" compiler="gnu" category="aux_glc">
        <options>
          <option name="wallclock">0:30</option>
        </options>
      </machine>

      <machine name="yellowstone" compiler="pgi" category="aux_glc">
        <options>
          <option name="wallclock">0:30</option>
        </options>
      </machine>

      <machine name="cheyenne" compiler="gnu" category="prealpha">
        <options>
          <option name="wallclock">0:30</option>
          <option name="comment">Include a single-processor test, because cime changes sometimes break single-processor runs</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="SMS_D" grid="f09_g16_gl5" compset="T1850G1">
    <machines>

      <machine name="yellowstone" compiler="intel" category="aux_glc">
        <options>
          <option name="wallclock">0:30</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="SMS_D_Ld5_P24x1" grid="T31_g37_gl20" compset="I1850Clm50SpG" testmods="cism/test_coupling">
    <machines>

      <machine name="hobart" compiler="nag" category="aux_glc">
        <options>
          <option name="wallclock">1:59</option>
          <!-- 2016-10-25: There is an increase of about 10 MB per day over the
               5 days of this test. This may truly be a memory leak. But this
               'test_coupling' configuration is a hacky configuration made just
               for testing, so I'm not too concerned about it.  -->
          <option name="memleak_tolerance">0.24</option>
          <option name="comment">IG nag debug test, to check logic for fields sent from glc to lnd</option>
        </options>
      </machine>

      <machine name="hobart" compiler="nag" category="prealpha">
        <options>
          <option name="wallclock">1:59</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="SMS_D_Ly1" grid="f09_g16_gl20" compset="T1850G">
    <machines>

      <machine name="yellowstone" compiler="pgi" category="aux_glc">
        <options>
          <option name="wallclock">0:20</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="SMS_D_Ly1" grid="f09_g16_gl20" compset="T1850G">
    <machines>

      <machine name="yellowstone" compiler="gnu" category="aux_glc">
        <options>
          <option name="wallclock">0:20</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="SMS_D_Ly1" grid="f09_g16_gl20" compset="T1850G">
    <machines>

      <machine name="yellowstone" compiler="intel" category="aux_glc">
        <options>
          <option name="wallclock">0:20</option>
        </options>
      </machine>

      <machine name="cheyenne" compiler="intel" category="prebeta">
        <options>
          <option name="wallclock">0:20</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="SMS_D_Ly1" grid="f09_g16_gl20" compset="T1850G" testmods="cism/trilinos">
    <machines>

      <machine name="yellowstone" compiler="intel" category="aux_glc">
        <options>
          <option name="wallclock">0:20</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="SMS_D_Ly1_P24x1" grid="f09_g16_gl4" compset="T1850G">
    <machines>

      <machine name="hobart" compiler="nag" category="aux_glc">
        <options>
          <option name="wallclock">1:59</option>
          <option name="comment">short nag debug test of CISM2 at production resolution, to test options specific to the production resolution (currently, which_ho_babc differs at the production resolution)</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="SMS_D_Ly3" grid="f09_g16_gl5" compset="T1850G1">
    <machines>

      <machine name="hobart" compiler="nag" category="aux_glc">
        <options>
          <option name="wallclock">1:59</option>
          <option name="comment">multi-year nag debug test of CISM1</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="SMS_D_Ly3_P24x1" grid="f09_g16_gl20" compset="T1850G">
    <machines>

      <machine name="hobart" compiler="nag" category="aux_glc">
        <options>
          <option name="wallclock">1:59</option>
          <option name="comment">multi-year nag debug test of CISM2 at coarse resolution</option>
        </options>
      </machine>

    </machines>
  </test>

  <test name="SMS_Ly5_N2_P2_D" grid="f09_g16_gl5" compset="T1850G1">
    <machines>

      <machine name="yellowstone" compiler="intel" category="aux_glc">
        <options>
          <option name="wallclock">0:30</option>
          <option name="comment">include a multi-instance debug test</option>
        </options>
      </machine>

      <machine name="cheyenne" compiler="intel" category="prebeta">
        <options>
          <option name="wallclock">0:30</option>
        </options>
      </machine>

    </machines>
  </test>
</testlist>
